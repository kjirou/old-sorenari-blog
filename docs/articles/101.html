<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>要素の相対位置で吹き出しを表示したかったが | 旧それなりブログ</title>
  </head>
  <body>
    <header>
      <p>旧それなりブログの跡地</p>
      <nav>
        <ul>
          <li><a href="https://kjirou.github.io/old-sorenari-blog/">トップへ</a></li>
          <li><a href="https://kjirou.github.io/blog/">新ブログへ</a></li>
        </ul>
      </nav>
    </header>
    <article>
      <section>
        <h1>要素の相対位置で吹き出しを表示したかったが</h1>
        <p>2007年8月23日</p>
      </section>
      <section>
        <div>
javascriptで吹き出しを表示するときの話です。</p>
<p><a href="http://blog.livedoor.jp/dankogai/archives/50897233.html" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://blog.livedoor.jp/dankogai/archives/50897233.html', 'ココ']);" >ココ</a>とか<a href="http://phpspot.org/blog/archives/2006/06/javascript_14.html" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://phpspot.org/blog/archives/2006/06/javascript_14.html', 'コレ']);" >コレ</a>とか<br />
大体マウスオーバーの座標を起点にして吹き出しが表示されるようです。
</div>
<div>
もっと単純にa要素とかimg要素とかからの相対位置で表示させればいいじゃん</p>
<p>と調べてみると</p>
<p>なるほど<br />
要素の絶対位置を直接取得することは出来ないので（各要素の幅や高さを加算してゆく方法もあるが大変な上に確実じゃない）、相対位置もまた取ることができないんスね。
</div>
<div>
吹き出しを表示させたい要素をブロック要素で囲んで、ブロック要素の相対座標を使って表示する方法もやってみましたが、面倒だし、汎用性に欠けるし、あんまり面白くない。
</div>
<div>
しかしながら、マウスオーバーされた瞬間に吹き出しを表示すると、吹き出しの口があまり自然じゃない位置に来てしまうという問題がある。</p>
<p>うーん、仕方ないので</p>
<ul>
<li>マウスオーバーから一瞬間を置いて吹き出しを表示する。</li>
<li>吹き出し表示中にマウスを動かすと、吹き出しがマウスを追跡する。</li>
</ul>
<p>この辺を複合させて誤魔化してみるか。
</p></div>
<div>
仕事だと、普通なら簡単にあきらめるところを調べざるを得ないので、勉強になりますね、と。
</div>

      </section>
    </article>
  </body>
</html>
